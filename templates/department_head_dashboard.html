{% extends "base.html" %}

{% block title %}Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù… - Research Hub DB{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <div>
            <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù…</h1>
            <p class="text-muted">Ø¯. {{ dept_head.FirstName }} {{ dept_head.LastName }} - {{ dept_head.DepartmentName }}</p>
        </div>
    </div>

    <div class="analytics-section">
        <h2>ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ©</h2>

        <div class="chart-container">
            <h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¨Ø­Ø§Ø« Ù„ÙƒÙ„ Ù…Ø´Ø±Ù</h3>
            <div class="bar-chart">
                {% for stat in supervisor_stats %}
                    <div class="bar-item">
                        <div class="bar-label">{{ stat.SupervisorName }}</div>
                        <div class="bar-wrapper">
                            <div class="bar-fill" style="width: {{ (stat.PaperCount / supervisor_stats[0].PaperCount * 100) if supervisor_stats[0].PaperCount > 0 else 0 }}%">
                                <span class="bar-value">{{ stat.PaperCount }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="chart-container">
            <h3>Ø£ÙƒØ«Ø± 5 Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¨Ø­Ø«ÙŠØ© Ø´ÙŠÙˆØ¹Ø§Ù‹</h3>
            {% if topic_stats %}
                <div class="topics-chart">
                    {% for stat in topic_stats %}
                        <div class="topic-item">
                            <div class="topic-rank">{{ loop.index }}</div>
                            <div class="topic-info">
                                <div class="topic-name">{{ stat.TopicName }}</div>
                                <div class="topic-count">{{ stat.TopicCount }} Ø¨Ø­Ø«</div>
                            </div>
                            <div class="topic-bar">
                                <div class="topic-bar-fill" style="width: {{ (stat.TopicCount / topic_stats[0].TopicCount * 100) }}%"></div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}