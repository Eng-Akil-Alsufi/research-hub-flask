{% extends "base.html" %}

{% block title %}نسيت كلمة المرور - Research Hub DB{% endblock %}

{% block content %}
<div class="container">
    <div class="login-container">
        <div class="login-card">
            <h1 class="login-title">نسيت كلمة المرور</h1>
            <p class="login-subtitle">أدخل اسم المستخدم الخاص بك لإعادة تعيين كلمة المرور</p>

            {% if not show_link %}
            <form action="{{ url_for('forgot_password') }}" method="POST" class="login-form">
                <div class="form-group">
                    <label for="username">اسم المستخدم</label>
                    <input 
                        type="text" 
                        id="username" 
                        name="username" 
                        class="form-control" 
                        required 
                        autofocus
                        placeholder="أدخل اسم المستخدم"
                    >
                    <small class="form-text">سيتم إنشاء رابط لإعادة تعيين كلمة المرور</small>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    إرسال رابط إعادة التعيين
                </button>
            </form>
            {% else %}
            <div class="alert alert-success" style="margin-top: 20px;">
                <h3 style="margin-top: 0;">تم إنشاء رابط إعادة التعيين بنجاح!</h3>
                <p>انسخ الرابط التالي واستخدمه لإعادة تعيين كلمة المرور:</p>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; word-break: break-all;">
                    <code style="color: #d63384;">{{ reset_link }}</code>
                </div>
                <a href="{{ reset_link }}" class="btn btn-primary btn-block" style="margin-top: 15px;">
                    الانتقال لإعادة تعيين كلمة المرور
                </a>
            </div>
            {% endif %}

            <div style="margin-top: 20px; text-align: center;">
                <a href="{{ url_for('login') }}" style="color: #007bff; text-decoration: none;">
                    العودة لتسجيل الدخول
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.form-text {
    display: block;
    margin-top: 5px;
    font-size: 0.875rem;
    color: #6c757d;
}

.alert-success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
    padding: 20px;
    border-radius: 8px;
}
</style>
{% endblock %}